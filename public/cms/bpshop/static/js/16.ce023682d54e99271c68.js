webpackJsonp([16],{N1Fe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),i=a("exGp"),o=a.n(i),l=a("1h8J"),s=a("HBZn"),c=a("dw4X"),m=a("SQnW"),u={watch:{filterText:function(e){this.$refs.tree.filter(e)}},created:function(){this.initThemeData()},components:{imgup:c.a,editor:m.a},data:function(){return{filterText:"",themeData:[],mainData:[],dialogFormVisible:!1,Form:{},standardForm:{name:"",description:"",mainImg:[],Theme_array:[]},sForm:{},imglimit:10,formLabelWidth:"120px",token:this.$store.getters.getUserInfo.token,searchItem:{},paginate:{count:0,currentPage:1,pagesize:10,is_page:!0},defaultProps:{children:"child",label:"name",value:"id"}}},methods:{initThemeData:function(){var e=this;return o()(r.a.mark(function t(){var a,n,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n={}).token=(a=e).token,t.prev=3,t.next=6,Object(l.J)(n);case 6:i=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0),Object(s.f)("网络故障","error");case 13:i&&(a.themeData=i.data,a.themeData[0]&&(a.searchItem.theme_id=a.themeData[0].id),a.initMainData());case 16:case"end":return t.stop()}},t,e,[[3,9]])}))()},initMainData:function(){var e=this;return o()(r.a.mark(function t(){var a,n,i,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).mainData=[],(n=e.paginate).searchItem=Object(s.a)(a.searchItem),n.token=a.token,a.themeData>0&&(console.log(999),i=[],Object(s.d)(a.themeData,i,"id",a.searchItem.theme_id)),t.prev=7,t.next=10,Object(l.G)(n);case 10:o=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),Object(s.f)("网络故障","error");case 16:o&&(a.paginate.count=o.data.total,a.mainData=o.data.data);case 19:case"end":return t.stop()}},t,e,[[7,13]])}))()},handleEdit:function(e){this.Form=Object(s.a)(e),this.sForm={},this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="edit";var t=[];Object(s.c)(this.themeData,this.Form.Theme_id,t),t.push(this.Form.Theme_id),this.Form.Theme_array=t,this.dialogFormVisible=!0},handleDel:function(e){var t=this;return o()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:(n=t).sForm={},n.sForm.id=e.id,n.sForm.token=n.token,n.sForm.themeType=e.theme.themeType,n.sForm.theme_id=0,n.sForm.type="del",n.onSubmit();case 8:case"end":return a.stop()}},a,t)}))()},onSubmit:function(){var e=this;return o()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"!=(a=e).sForm.type){t.next=17;break}return delete a.sForm.type,t.prev=3,t.next=6,Object(l.F)(a.sForm);case 6:n=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0),Object(s.f)("网络故障","error");case 13:a.sForm.type="edit",t.next=31;break;case 17:if("del"!=a.sForm.type){t.next=31;break}return delete a.sForm.type,t.prev=19,t.next=22,Object(l.E)(a.sForm);case 22:n=t.sent,t.next=29;break;case 25:t.prev=25,t.t1=t.catch(19),console.log(t.t1),Object(s.f)("网络故障","error");case 29:a.sForm.type="del";case 31:n&&"success"==Object(s.g)(n)&&(a.dialogFormVisible=!1,a.initMainData());case 34:case"end":return t.stop()}},t,e,[[3,9],[19,25]])}))()},imgchange:function(e,t,a){return Object(s.e)(this,e,t,a)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("div",[a("el-cascader",{attrs:{options:e.themeData,props:e.defaultProps,value:[e.searchItem.theme_id],placeholder:"选择主题类别","change-on-select":"",clearable:""},on:{change:function(t){e.searchItem.theme_id=t[t.length-1],e.initMainData()}}}),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入主题内容名称",clearable:""},on:{blur:function(t){t.target._value?e.searchItem.name=t.target._value:delete e.searchItem.name,e.initMainData()}}})],1)]),e._v(" "),a("el-main",{staticStyle:{height:"600px",border:"2px solid #eee"}},[e.mainData[0]&&"article"==e.mainData[0].theme.themeType?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mainData}},[a("el-table-column",{attrs:{label:"主题标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.name?a("span",[e._v(e._s(t.row.name))]):e._e(),e._v(" "),null!=t.row.title?a("span",[e._v(e._s(t.row.title))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("文章")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"文章标题",prop:"relationinfo.title"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])]}}])})],1)],1):e._e(),e._v(" "),e.mainData[0]&&"product"==e.mainData[0].theme.themeType?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mainData}},[a("el-table-column",{attrs:{label:"主题标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.name?a("span",[e._v(e._s(t.row.name))]):e._e(),e._v(" "),null!=t.row.title?a("span",[e._v(e._s(t.row.title))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("商品")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"产品标题",prop:"relationinfo.name"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])]}}])})],1)],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"主题信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{autocomplete:"off"}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{on:{input:function(t){e.sForm.name=arguments[0]}},model:{value:e.Form.name,callback:function(t){e.$set(e.Form,"name",t)},expression:"Form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{on:{input:function(t){e.sForm.description=arguments[0]}},model:{value:e.Form.description,callback:function(t){e.$set(e.Form,"description",t)},expression:"Form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"主图上传"}},[a("imgup",{attrs:{imglist:e.Form.img,imglimit:e.imglimit},on:{imgchange:function(t){e.imgchange(t,"sForm","mainImg")}}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-footer",{staticStyle:{"margin-top":"20px"}},[a("div",[a("el-pagination",{attrs:{"current-page":e.paginate.currentPage,"page-sizes":[10,50,70,100],"page-size":e.paginate.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginate.count},on:{"size-change":function(t){e.paginate.pagesize=t,e.initMainData()},"current-change":function(t){e.paginate.currentPage=t,e.initMainData()}}})],1)])],1)],1)},staticRenderFns:[]},d=a("VU/8")(u,p,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=16.ce023682d54e99271c68.js.map