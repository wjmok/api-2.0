webpackJsonp([12],{KFmI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),s=n("exGp"),a=n.n(s),r=n("SQnW"),l=n("dw4X"),c=n("1h8J"),m=n("HBZn"),u={data:function(){return{mainData:[],dialogFormVisible:!1,formLabelWidth:"200px",paginate:{count:0,currentPage:1,pagesize:10,is_page:!0},searchItem:{},imglimit:2,Form:{},standardForm:{name:"",appid:"",appsecret:"",app_description:"",scope:"",scope_description:"",app_type:"",img:[],phone:"",picstandard:"",mchid:"",wxkey:"",password:""},sForm:{},passForm:{password:""},settingRule:{discount:"",deadline:"",score:"",superScore:""},dialogType:"one",userKey:this.$store.getters.getUserInfo.username,token:this.$store.getters.getUserInfo.token,thirdapp_id:this.$store.getters.getUserInfo.thirdapp_id}},created:function(){this.initMainData()},components:{editor:r.a,imgup:l.a},methods:{initMainData:function(){var e=this;return a()(i.a.mark(function t(){var n,o,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e).mainData=[],(o=n.paginate).token=n.token,t.prev=4,t.next=7,Object(c.Q)(o);case 7:s=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0),Object(m.f)("网络故障","error");case 14:s&&(n.paginate.count=s.data.total,n.mainData=s.data.data,n.settingRule=Object(m.a)(s.data.customRule),n.settingRule.signin=s.data.distributionRule.signin,console.log(n.settingRule));case 17:case"end":return t.stop()}},t,e,[[4,10]])}))()},handleAdd:function(){this.dialogType="one",this.Form=Object(m.a)(this.standardForm),this.sForm={},this.sForm.type="add",this.sForm.token=this.token,this.dialogFormVisible=!0},handleEdit:function(e){this.dialogType="one",this.Form=Object(m.a)(e),this.sForm={},this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="edit",this.dialogFormVisible=!0},handleDel:function(e){this.sForm={},this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="del",this.onSubmit()},handleEditPassword:function(e){this.dialogType="two",this.sForm={},this.Form={},this.Form.password="",this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="upPassword",this.dialogFormVisible=!0},handleSetting:function(){this.dialogType="setting",this.sForm={},this.sForm.custom_rule=Object(m.a)(this.settingRule),this.sForm.type="setting",this.sForm.token=this.token,this.dialogFormVisible=!0,console.log(this.sForm)},onSubmit:function(){var e=this;return a()(i.a.mark(function t(){var n,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,console.log(n.settingRule),"edit"!=n.sForm.type){t.next=18;break}return delete n.sForm.type,t.prev=4,t.next=7,Object(c.P)(n.sForm);case 7:o=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0),Object(m.f)("网络故障","error");case 14:n.sForm.type="edit",t.next=80;break;case 18:if("add"!=n.sForm.type){t.next=34;break}return delete n.sForm.type,t.prev=20,t.next=23,Object(c.M)(n.sForm);case 23:o=t.sent,t.next=30;break;case 26:t.prev=26,t.t1=t.catch(20),console.log(t.t1),Object(m.f)("网络故障","error");case 30:n.sForm.type="add",t.next=80;break;case 34:if("upPassword"!=n.sForm.type){t.next=50;break}return delete n.sForm.type,t.prev=36,t.next=39,Object(c._22)(n.sForm);case 39:o=t.sent,t.next=46;break;case 42:t.prev=42,t.t2=t.catch(36),console.log(t.t2),Object(m.f)("网络故障","error");case 46:n.sForm.type="upPassword",t.next=80;break;case 50:if("del"!=n.sForm.type){t.next=66;break}return delete n.sForm.type,t.prev=52,t.next=55,Object(c.O)(n.sForm);case 55:o=t.sent,t.next=62;break;case 58:t.prev=58,t.t3=t.catch(52),console.log(t.t3),Object(m.f)("网络故障","error");case 62:n.sForm.type="del",t.next=80;break;case 66:if("setting"!=n.sForm.type){t.next=80;break}return delete n.sForm.type,t.prev=68,t.next=71,Object(c._20)(n.sForm);case 71:o=t.sent,t.next=78;break;case 74:t.prev=74,t.t4=t.catch(68),console.log(t.t4),Object(m.f)("网络故障","error");case 78:n.sForm.type="setting";case 80:o&&"success"==Object(m.g)(o)&&(n.dialogFormVisible=!1,n.initMainData());case 83:case"end":return t.stop()}},t,e,[[4,10],[20,26],[36,42],[52,58],[68,74]])}))()},imgchange:function(e,t,n){return Object(m.e)(this,e,t,n)}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-container",[n("el-header",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd()}}},[e._v("创建用户")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSetting()}}},[e._v("设置系统参数")])],1),e._v(" "),n("el-main",{staticStyle:{height:"700px",border:"2px solid #eee"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mainData}},[n("el-table-column",{attrs:{label:"用户名",prop:"name"}}),e._v(" "),n("el-table-column",{attrs:{label:"真实姓名",prop:"realname"}}),e._v(" "),n("el-table-column",{attrs:{label:"手机号",prop:"phone"}}),e._v(" "),n("el-table-column",{attrs:{label:"头像",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.img?n("div",e._l(t.row.img,function(e){return n("div",{staticStyle:{display:"inline-block"}},[n("img",{staticStyle:{width:"60px","border-radius":"50%"},attrs:{src:e.url}})])})):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"权限参数",prop:"primary_scope"}}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleEdit(t.row)}}},[e._v("\n            编辑\n          ")]),e._v(" "),e.userKey==t.row.name?n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleEditPassword(t.row)}}},[e._v("变更密码\n          ")]):e._e(),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(n){e.handleDel(t.row)}}},[e._v("\n          删除\n          ")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"项目信息",visible:e.dialogFormVisible,id:"dialog"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"Form",attrs:{model:e.Form}},["two"==e.dialogType?n("div",[n("el-form-item",{attrs:{label:"用户密码","label-width":e.formLabelWidth,prop:"password"}},[n("el-input",{on:{change:function(t){e.sForm.password=arguments[0]}},model:{value:e.Form.password,callback:function(t){e.$set(e.Form,"password",t)},expression:"Form.password"}})],1)],1):e._e(),e._v(" "),"setting"==e.dialogType?n("div",[n("el-form-item",{attrs:{label:"折扣值","label-width":e.formLabelWidth}},[n("el-input",{on:{change:function(t){e.sForm.custom_rule.discount=e.settingRule.discount}},model:{value:e.settingRule.discount,callback:function(t){e.$set(e.settingRule,"discount",t)},expression:"settingRule.discount"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"卡有效期","label-width":e.formLabelWidth}},[n("el-input",{on:{change:function(t){e.sForm.custom_rule.deadline=e.settingRule.deadline}},model:{value:e.settingRule.deadline,callback:function(t){e.$set(e.settingRule,"deadline",t)},expression:"settingRule.deadline"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"消费返积分倍数","label-width":e.formLabelWidth}},[n("el-input",{on:{change:function(t){e.sForm.custom_rule.score=e.settingRule.score}},model:{value:e.settingRule.score,callback:function(t){e.$set(e.settingRule,"score",t)},expression:"settingRule.score"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"超级会员消费返积分倍数","label-width":e.formLabelWidth}},[n("el-input",{on:{change:function(t){e.sForm.custom_rule.superScore=e.settingRule.superScore}},model:{value:e.settingRule.superScore,callback:function(t){e.$set(e.settingRule,"superScore",t)},expression:"settingRule.superScore"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"签到赠送积分","label-width":e.formLabelWidth}},[n("el-input",{on:{change:function(t){e.sForm.custom_rule.signin=e.settingRule.signin}},model:{value:e.settingRule.signin,callback:function(t){e.$set(e.settingRule,"signin",t)},expression:"settingRule.signin"}})],1)],1):"one"==e.dialogType?n("div",[n("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{on:{input:function(t){e.sForm.name=arguments[0]}},model:{value:e.Form.name,callback:function(t){e.$set(e.Form,"name",t)},expression:"Form.name"}})],1),e._v(" "),"add"==e.sForm.type?n("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[n("el-input",{on:{input:function(t){e.sForm.password=arguments[0]}},model:{value:e.Form.password,callback:function(t){e.$set(e.Form,"password",t)},expression:"Form.password"}})],1):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"真实姓名","label-width":e.formLabelWidth,prop:"realname"}},[n("el-input",{attrs:{"auto-complete":"off"},on:{input:function(t){e.sForm.realname=arguments[0]}},model:{value:e.Form.realname,callback:function(t){e.$set(e.Form,"realname",t)},expression:"Form.realname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth,prop:"phone"}},[n("el-input",{attrs:{"auto-complete":"off"},on:{change:function(t){e.sForm.phone=e.Form.phone}},model:{value:e.Form.phone,callback:function(t){e.$set(e.Form,"phone",t)},expression:"Form.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"头像上传",prop:"img"}},[n("imgup",{attrs:{imglist:e.Form.img,imglimit:e.imglimit},on:{imgchange:function(t){e.imgchange(t,"sForm","img")}}})],1)],1):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),n("el-footer",[n("el-pagination",{attrs:{"current-page":e.paginate.currentPage,"page-sizes":[10,50,70,100],"page-size":e.paginate.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginate.count},on:{"size-change":function(t){e.paginate.pagesize=t,e.initMainData()},"current-change":function(t){e.paginate.currentPage=t,e.initMainData()}}})],1)],1)],1)},staticRenderFns:[]};var d=n("VU/8")(u,p,!1,function(e){n("ohfg")},null,null);t.default=d.exports},ohfg:function(e,t){}});
//# sourceMappingURL=12.f799d944a7528bd26bdf.js.map