webpackJsonp([3],{"+6QC":function(e,t){},KFmI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("Xxa5"),r=i.n(o),a=i("exGp"),n=i.n(a),s=i("SQnW"),l=i("dw4X"),c=i("1h8J"),m=i("HBZn"),p={data:function(){return{tableData:[],dialogFormVisible:!1,dialogPassVisible:!1,dialogDisVisible:!1,formLabelWidth:"200px",paginate:{count:0,currentPage:1,pagesize:10,is_page:!0},searchItem:{},imglimit:2,Form:{},standardForm:{name:"",appid:"",appsecret:"",app_description:"",scope:"",scope_description:"",app_type:"",img:[],phone:"",picstandard:"",mchid:"",wxkey:"",password:""},sForm:{},passForm:{password:""},userKey:this.$store.getters.getUserInfo.username,token:this.$store.getters.getUserInfo.token,thirdapp_id:this.$store.getters.getUserInfo.thirdapp_id,distributionRule:{}}},created:function(){this.initMainData()},components:{editor:s.a,imgup:l.a},methods:{initMainData:function(){var e=this;return n()(r.a.mark(function t(){var i,o,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(i=e).tableData=[],(o=i.paginate).token=i.token,t.prev=4,t.next=7,Object(c.Q)(o);case 7:a=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0),Object(m.f)("网络故障","error");case 14:a&&(i.paginate.count=a.data.total,i.tableData=a.data.data,i.distributionRule=a.data.distributionRule);case 17:case"end":return t.stop()}},t,e,[[4,10]])}))()},handleAdd:function(){this.Form=Object(m.a)(this.standardForm),this.sForm={},this.sForm.type="add",this.sForm.token=this.token,this.dialogFormVisible=!0},handleDistri:function(){this.Form=Object(m.a)(this.distributionRule),this.sForm={},this.sForm.distributionRule=Object(m.a)(this.distributionRule),this.sForm.type="dis",this.sForm.token=this.token,this.dialogDisVisible=!0},handleEdit:function(e){this.Form=Object(m.a)(e),this.sForm={},this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="edit",this.dialogFormVisible=!0},handleDel:function(e){var t=this;return n()(r.a.mark(function i(){var o;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:(o=t).sForm={},o.sForm.id=e.id,o.sForm.token=o.token,o.sForm.type="del",o.onSubmit();case 6:case"end":return i.stop()}},i,t)}))()},handleEditPassword:function(e){this.sForm={},this.Form={},this.Form.password="",this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="upPassword",this.dialogPassVisible=!0},onSubmit:function(){var e=this;return n()(r.a.mark(function t(){var i,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"!=(i=e).sForm.type){t.next=17;break}return delete i.sForm.type,t.prev=3,t.next=6,Object(c.P)(i.sForm);case 6:o=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0),Object(m.f)("网络故障","error");case 13:i.sForm.type="edit",t.next=79;break;case 17:if("add"!=i.sForm.type){t.next=33;break}return delete i.sForm.type,t.prev=19,t.next=22,Object(c.M)(i.sForm);case 22:o=t.sent,t.next=29;break;case 25:t.prev=25,t.t1=t.catch(19),console.log(t.t1),Object(m.f)("网络故障","error");case 29:i.sForm.type="add",t.next=79;break;case 33:if("upPassword"!=i.sForm.type){t.next=49;break}return delete i.sForm.type,t.prev=35,t.next=38,Object(c._14)(i.sForm);case 38:o=t.sent,t.next=45;break;case 41:t.prev=41,t.t2=t.catch(35),console.log(t.t2),Object(m.f)("网络故障","error");case 45:i.sForm.type="upPassword",t.next=79;break;case 49:if("del"!=i.sForm.type){t.next=65;break}return delete i.sForm.type,t.prev=51,t.next=54,Object(c.N)(i.sForm);case 54:o=t.sent,t.next=61;break;case 57:t.prev=57,t.t3=t.catch(51),console.log(t.t3),Object(m.f)("网络故障","error");case 61:i.sForm.type="del",t.next=79;break;case 65:if("dis"!=i.sForm.type){t.next=79;break}return delete i.sForm.type,t.prev=67,t.next=70,Object(c.O)(i.sForm);case 70:o=t.sent,t.next=77;break;case 73:t.prev=73,t.t4=t.catch(67),console.log(t.t4),Object(m.f)("网络故障","error");case 77:i.sForm.type="dis";case 79:o&&"success"==Object(m.g)(o)&&("upPassword"==i.sForm.type?i.dialogPassVisible=!1:(i.dialogFormVisible=!1,i.dialogDisVisible=!1),i.initMainData());case 82:case"end":return t.stop()}},t,e,[[3,9],[19,25],[35,41],[51,57],[67,73]])}))()},imgchange:function(e){return Object(m.e)(this,e,"sForm","img")}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-container",[i("el-header",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd()}}},[e._v("创建用户")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDistri()}}},[e._v("设置分销参数")])],1),e._v(" "),i("el-main",{staticStyle:{height:"700px",border:"2px solid #eee"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{label:"用户名",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"真实姓名",prop:"realname"}}),e._v(" "),i("el-table-column",{attrs:{label:"手机号",prop:"phone"}}),e._v(" "),i("el-table-column",{attrs:{label:"头像",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.img?i("div",e._l(t.row.img,function(e){return i("div",{staticStyle:{display:"inline-block"}},[i("img",{staticStyle:{width:"60px","border-radius":"50%"},attrs:{src:e.url}})])})):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"权限参数",prop:"primary_scope"}}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small"},on:{click:function(i){e.handleEdit(t.row)}}},[e._v("\n            编辑\n          ")]),e._v(" "),e.userKey==t.row.name?i("el-button",{attrs:{size:"small"},on:{click:function(i){e.handleEditPassword(t.row)}}},[e._v("变更密码\n          ")]):e._e(),e._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(i){e.handleDel(t.row)}}},[e._v("\n          删除\n          ")])]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:"项目信息",visible:e.dialogFormVisible,id:"dialog"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"Form",attrs:{model:e.Form}},[i("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{on:{input:function(t){e.sForm.name=arguments[0]}},model:{value:e.Form.name,callback:function(t){e.$set(e.Form,"name",t)},expression:"Form.name"}})],1),e._v(" "),"add"==e.sForm.type?i("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[i("el-input",{on:{input:function(t){e.sForm.password=arguments[0]}},model:{value:e.Form.password,callback:function(t){e.$set(e.Form,"password",t)},expression:"Form.password"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"真实姓名","label-width":e.formLabelWidth,prop:"realname"}},[i("el-input",{attrs:{"auto-complete":"off"},on:{input:function(t){e.sForm.realname=arguments[0]}},model:{value:e.Form.realname,callback:function(t){e.$set(e.Form,"realname",t)},expression:"Form.realname"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"手机号",df:"",prop:"phone"}},[i("el-input",{attrs:{"auto-complete":"off"},on:{change:function(t){e.sForm.phone=e.Form.phone}},model:{value:e.Form.phone,callback:function(t){e.$set(e.Form,"phone",t)},expression:"Form.phone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"头像上传",prop:"img"}},[i("imgup",{attrs:{imglist:e.Form.img,imglimit:e.imglimit},on:{imgchange:e.imgchange}})],1),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改密码",visible:e.dialogPassVisible,id:"dialog1"},on:{"update:visible":function(t){e.dialogPassVisible=t}}},[i("el-form",{ref:"Form",attrs:{model:e.Form}},[i("el-form-item",{attrs:{label:"用户密码","label-width":e.formLabelWidth,prop:"password"}},[i("el-input",{on:{change:function(t){e.sForm.password=arguments[0]}},model:{value:e.Form.password,callback:function(t){e.$set(e.Form,"password",t)},expression:"Form.password"}})],1),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"设置分销参数",visible:e.dialogDisVisible},on:{"update:visible":function(t){e.dialogDisVisible=t}}},[i("el-form",{attrs:{model:e.Form}},[i("el-form-item",{attrs:{label:"签到赠送积分数量","label-width":e.formLabelWidth}},[i("el-input",{on:{change:function(t){e.sForm.distributionRule.signin=e.Form.signin}},model:{value:e.Form.signin,callback:function(t){e.$set(e.Form,"signin",t)},expression:"Form.signin"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"分享关注赠送积分数量","label-width":e.formLabelWidth}},[i("el-input",{on:{change:function(t){e.sForm.distributionRule.subscribe=e.Form.signin}},model:{value:e.Form.subscribe,callback:function(t){e.$set(e.Form,"subscribe",t)},expression:"Form.subscribe"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"补全信息赠送积分数量","label-width":e.formLabelWidth}},[i("el-input",{on:{change:function(t){e.sForm.distributionRule.info=e.Form.signin}},model:{value:e.Form.info,callback:function(t){e.$set(e.Form,"info",t)},expression:"Form.info"}})],1),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),i("el-footer",[i("el-pagination",{attrs:{"current-page":e.paginate.currentPage,"page-sizes":[10,50,70,100],"page-size":e.paginate.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginate.count},on:{"size-change":function(t){e.paginate.pagesize=t,e.initMainData()},"current-change":function(t){e.paginate.currentPage=t,e.initMainData()}}})],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(p,d,!1,function(e){i("+6QC")},null,null);t.default=u.exports}});
//# sourceMappingURL=3.585dbcb6fa4b2956b424.js.map