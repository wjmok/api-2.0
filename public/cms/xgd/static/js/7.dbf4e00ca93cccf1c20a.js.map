{"version":3,"sources":["webpack:///src/components/page/Order.vue","webpack:///./src/components/page/Order.vue?4be7","webpack:///./src/components/page/Order.vue"],"names":["Order","username","token","thirdapp_id","initMainData","editor","VueEditor","imgup","UploadImg","_this","this","self","paginate","searchItem","postData","log","_context","t0","total","data","tableData","id","onSubmit","_this2","type","sForm","_context2","t1","Object","commonFunc","res","page_Order","render","_vm","_h","$createElement","_c","_self","attrs","placeholder","clearable","on","change","value","order_step","model","searchForm","callback","$$v","$set","expression","_l","item","label","_v","transport_status","pay_status","staticStyle","height","border","width","scopedSlots","_u","key","fn","props","staticClass","label-position","inline","_s","row","snap_address","name","phone","province","city","country","detail","isremark","_e","create_time","snap_product","product","category","puser","prop","scope","size","click","$event","sendGoods","Refund","completeOrder","current-page","currentPage","page-sizes","page-size","pagesize","layout","count","size-change","val","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.dbf4e00ca93cccf1c20a.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-container >\r\n    <el-header>\r\n      <el-select v-model=\"searchForm.order_step\"  @change=\"(value) => { \r\n      if(!value){ delete searchItem.order_step;}else{searchItem.order_step = value;};initMainData();}\" placeholder=\"请选择订单状态\" clearable >\r\n          <el-option v-for=\"item in stepOptions\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n      </el-select>\r\n      <el-select v-model=\"searchForm.transport_status\"  @change=\"(value) => { \r\n      if(!value){ delete searchItem.transport_status;}else{searchItem.transport_status = value;};initMainData();}\" placeholder=\"请选择物流状态\" clearable >\r\n          <el-option v-for=\"item in transportOptions\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n      </el-select>\r\n      <el-select v-model=\"searchForm.pay_status\"  @change=\"(value) => { \r\n      if(!value){ delete searchItem.pay_status;}else{searchItem.pay_status = value;};initMainData();}\" placeholder=\"请选择支付状态状态\" clearable >\r\n          <el-option v-for=\"item in payOptions\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n      </el-select>\r\n      \r\n    </el-header>\r\n    <el-main style=\"height: 700px; border: 2px solid #eee\">\r\n      <el-table :data=\"tableData\" style=\"width: 100%\">  \r\n\r\n        <el-table-column type=\"expand\">\r\n          <template slot-scope=\"props\">\r\n            <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n              \r\n              <el-form-item label=\"收件人姓名\">\r\n                <span>{{ props.row.snap_address.name }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"收件人电话\">\r\n                <span>{{ props.row.snap_address.phone }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"收件人地址 \">\r\n                <span>{{ props.row.snap_address.province }}\r\n                {{ props.row.snap_address.city }}\r\n                {{ props.row.snap_address.country }}\r\n                {{ props.row.snap_address.detail }}</span>\r\n              </el-form-item>\r\n              \r\n\r\n\r\n              <el-form-item label=\"是否评论 \">\r\n              \r\n                <span v-if=\"props.row.isremark == '0'\">\r\n                  未评论\r\n                </span>\r\n                <span v-if=\"props.row.isremark == '1'\">\r\n                  已评论\r\n                </span>\r\n                \r\n              </el-form-item>\r\n              \r\n              <el-form-item label=\"下单时间\">\r\n                <span>{{ props.row.create_time }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"产品名称\" v-if=\"props.row.item[0].snap_product.product\">\r\n                \r\n                  {{props.row.item[0].snap_product.product.name}}\r\n                \r\n              </el-form-item>\r\n              <el-form-item label=\"产品类别\" v-if=\"props.row.item[0].snap_product.category\"  >\r\n                  {{props.row.item[0].snap_product.category.name}}\r\n              </el-form-item>\r\n\r\n              <el-form-item v-if=\"props.row.puser\" label=\"推荐人信息\">\r\n                姓名:<span>{{ props.row.puser.username }}</span>\r\n                电话:<span>{{ props.row.puser.phone }}</span>\r\n                user_id:<span>{{ props.row.puser.id }}</span>\r\n              </el-form-item>\r\n\r\n\r\n\r\n              <div>\r\n                <el-form-item label=\"订单详情\">\r\n                  <el-table :data=\"props.row.item\" style=\"width: 100%\">\r\n                  <el-table-column\r\n                    label=\"产品型号名称\"\r\n                    prop=\"snap_product.name\" width=\"180\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                    label=\"产品单价\"\r\n                    prop=\"snap_product.price\" width=\"180\">\r\n                  </el-table-column>\r\n                  <el-table-column\r\n                    label=\"购买数量\"\r\n                    prop=\"count\" width=\"180\">\r\n                  </el-table-column>\r\n                  </el-table>\r\n                </el-form-item>\r\n              </div>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n\r\n\r\n\r\n\r\n        <el-table-column label=\"订单编号\" prop=\"order_no\">\r\n        </el-table-column>\r\n        <el-table-column label=\"总价\" prop=\"total_price\">\r\n        </el-table-column>\r\n        <el-table-column label=\"手机号\" prop=\"user.phone\">\r\n        </el-table-column>\r\n        \r\n\r\n        <el-table-column label=\"微信昵称\" prop=\"user.nickname\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"创建时间\"\r\n          prop=\"create_time\">\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          label=\"支付状态\"                    \r\n           width=\"120\">\r\n\r\n          <template slot-scope=\"scope\">\r\n            \r\n            <span v-if=\"scope.row.pay_status == '0'\">\r\n              未支付\r\n            </span>\r\n            <span v-if=\"scope.row.pay_status == '1'\">\r\n              已支付\r\n            </span>\r\n            <span v-if=\"scope.row.pay_status == '2'\">\r\n              货到付款\r\n            </span>\r\n            \r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          label=\"订单状态\"                    \r\n           width=\"120\">\r\n\r\n          <template slot-scope=\"scope\">\r\n            \r\n            <span v-if=\"scope.row.order_step == '0'\">\r\n              正常下单\r\n            </span>\r\n            <span v-if=\"scope.row.order_step == '1'\">\r\n              申请撤单\r\n            </span>\r\n            <span v-if=\"scope.row.order_step == '2'\">\r\n              同意撤单\r\n            </span>\r\n            <span v-if=\"scope.row.order_step == '3'\">\r\n              完结\r\n            </span>\r\n            \r\n          </template>\r\n\r\n\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          label=\"物流状态\"                    \r\n           width=\"120\">\r\n\r\n          <template slot-scope=\"scope\">\r\n            \r\n            <span v-if=\"scope.row.transport_status == '0'\">\r\n              未发货\r\n            </span>\r\n            <span v-if=\"scope.row.transport_status == '1'\">\r\n              已发货\r\n            </span>\r\n            <span v-if=\"scope.row.transport_status == '2'\">\r\n              已收货\r\n            </span>\r\n            \r\n          </template>\r\n          \r\n\r\n\r\n        </el-table-column>\r\n\r\n\r\n\r\n\r\n\r\n        <el-table-column label=\"操作\"  width=\"250\">\r\n          <template scope=\"scope\" >\r\n            <el-button\r\n              size=\"small\"\r\n              @click=\"sendGoods(scope.row)\">发货</el-button>\r\n            \r\n            <el-button\r\n            size=\"small\"\r\n            @click=\"Refund(scope.row)\">撤单</el-button>\r\n            <el-button\r\n            size=\"small\"\r\n            @click=\"completeOrder(scope.row)\">完结</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      \r\n\r\n      \r\n    </el-main>\r\n    <el-footer>\r\n      <el-pagination\r\n        @size-change=\"(val) => {paginate.pagesize = val;initMainData();}\"\r\n        @current-change=\"(val) => {paginate.currentPage = val;initMainData();}\"\r\n        :current-page=\"paginate.currentPage\"\r\n        :page-sizes=\"[10, 50, 70, 100]\"\r\n        :page-size=\"paginate.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"paginate.count\">\r\n      </el-pagination>\r\n    </el-footer>\r\n  </el-container>\r\n\r\n  </div>\r\n  \r\n\r\n  \r\n  \r\n</template>\r\n\r\n<style>\r\n  .demo-table-expand {\r\n    font-size: 0;\r\n  }\r\n  .demo-table-expand label {\r\n    width: 90px;\r\n    color: #99a9bf;\r\n  }\r\n  .demo-table-expand .el-form-item {\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    width: 50%;\r\n  }\r\n</style>\r\n\r\n<script>\r\n  \r\n  import editor from '../common/VueEditor'; \r\n  import imgup from '../common/UploadImg'; \r\n  import {sendOrderList,sendOrderEdit,sendOrderDel} from '@/api/getData';\r\n  import {notify,sCallBack,cloneForm,formatDate,imgchange} from '@/api/commonFunc';\r\n  \r\n  \r\n   \r\n  export default {\r\n\r\n    data() {\r\n      return {\r\n        tableData: [],//承载主列表数据\r\n        dialogFormVisible: false,//dialog的显示参数，默认不显示\r\n        dialogPassVisible: false,//dialog的显示参数，默认不显示\r\n        formLabelWidth: '120px',//设置的el-form-item的宽度\r\n        paginate: {\r\n            count: 0,\r\n            currentPage: 1,\r\n            pagesize:10,\r\n            is_page:true,\r\n\r\n        },//分页的基础设置参数\r\n        searchForm:{\r\n          order_step:'',\r\n          transport_status:'',\r\n          pay_status:'',\r\n        },\r\n\r\n        searchItem:{\r\n\r\n        },       \r\n        imglimit:2,//设置上传插件允许上传的张数      \r\n        Form: {\r\n\r\n        },//承载页面数据装载\r\n        standardForm:{\r\n\r\n        },\r\n        stepOptions: [\r\n          {\r\n            value: '0',\r\n            label: '正常下单'\r\n          }, \r\n          {\r\n            value: '1',\r\n            label: '申请撤单'\r\n          },\r\n          {\r\n            value: '2',\r\n            label: '同意撤单'\r\n          },\r\n          {\r\n            value: '3',\r\n            label: '完结'\r\n          },\r\n        ],\r\n\r\n        transportOptions: [\r\n          {\r\n            value: '0',\r\n            label: '未发货'\r\n          }, \r\n          {\r\n            value: '1',\r\n            label: '已发货'\r\n          },\r\n          {\r\n            value: '2',\r\n            label: '已收货'\r\n          },\r\n        ],\r\n\r\n        payOptions: [\r\n          {\r\n            value: '0',\r\n            label: '未支付'\r\n          }, \r\n          {\r\n            value: '1',\r\n            label: '已支付'\r\n          },\r\n          {\r\n            value: '2',\r\n            label: '货到付款'\r\n          },\r\n        ],\r\n        sForm: {},//承载提交数据装载\r\n        passForm:{\r\n          password:'',\r\n        },\r\n        userKey:this.$store.getters.getUserInfo.username,\r\n        token:this.$store.getters.getUserInfo.token,\r\n        thirdapp_id:this.$store.getters.getUserInfo.thirdapp_id,\r\n\r\n      }\r\n    },\r\n    created(){\r\n      this.initMainData();\r\n      \r\n    },\r\n    components: {\r\n      editor,\r\n      imgup,\r\n\r\n    },\r\n    methods: {\r\n\r\n      \r\n\r\n      //页面数据初始化\r\n      async initMainData(){\r\n        const self = this;\r\n        self.tableData = [];\r\n\r\n        const postData  = self.paginate;        \r\n        postData.token = self.token; \r\n        postData.searchItem = cloneForm(self.searchItem);\r\n\r\n        try{\r\n          var res = await sendOrderList(postData);\r\n        }catch(err){\r\n          console.log(err); \r\n          notify('网络故障','error');\r\n        };\r\n         \r\n        if(res){\r\n          self.paginate['count'] = res.data.total;\r\n          self.tableData = res.data.data;\r\n          console.log(self.tableData);\r\n        };\r\n      },\r\n\r\n\r\n\r\n\r\n      //发货按钮触发事件\r\n      sendGoods(row) {\r\n        const self = this;       \r\n        self.sForm = {};\r\n        self.sForm.id = row.id;\r\n\r\n        self.sForm.orderinfo ={};  \r\n        self.sForm.orderinfo.transport_status = '1';   \r\n        self.sForm.token = self.token;  \r\n        self.sForm.type = 'edit'; \r\n        self.onSubmit();\r\n        \r\n        \r\n      },\r\n\r\n      //撤单按钮触发事件\r\n      Refund(row) {\r\n        const self = this;       \r\n        self.sForm = {};\r\n        self.sForm.id = row.id;\r\n        self.sForm.orderinfo ={};  \r\n        self.sForm.orderinfo.order_step = '2';  \r\n        self.sForm.token = self.token;  \r\n        self.sForm.type = 'edit'; \r\n        self.onSubmit();\r\n        \r\n        \r\n      },\r\n      //完结按钮\r\n      completeOrder(row){\r\n        const self = this;\r\n        self.sForm = {};\r\n        self.sForm.id = row.id;\r\n        self.sForm.order_step = '3';\r\n        self.sForm.token = self.token;\r\n        self.sForm.type = 'edit';\r\n        self.onSubmit();\r\n\r\n      },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      //dialog中提交按钮事件\r\n      async onSubmit() {\r\n\r\n        const self = this;\r\n       \r\n\r\n        if (self.sForm.type == 'edit') {\r\n\r\n          delete self.sForm.type;\r\n          try {\r\n            var res = await sendOrderEdit(self.sForm); \r\n          } catch (err) {\r\n              console.log(err); \r\n              notify('网络故障','error'); \r\n          };\r\n          self.sForm.type = 'edit';\r\n                        \r\n        }else if(self.sForm.type == 'del'){\r\n       \r\n          delete self.sForm.type;\r\n          try{\r\n            var res = await sendOrderDel(self.sForm);\r\n          }catch(err){\r\n            console.log(err);\r\n            notify('网络故障','error');\r\n          };\r\n          self.sForm.type = 'del';\r\n\r\n        };\r\n\r\n        \r\n\r\n        if(res){\r\n          var fCall =  sCallBack(res);\r\n          if(fCall == 'success'){\r\n            if(self.sForm.type == 'upPassword'){\r\n              self.dialogPassVisible = false;\r\n            }else{\r\n              self.dialogFormVisible = false;\r\n            };\r\n            self.initMainData();\r\n          };\r\n        };\r\n        \r\n\r\n      },\r\n     \r\n\r\n\r\n\r\n      //图片上传的回调\r\n      imgchange(data){\r\n          return imgchange(this,data,'sForm','img');\r\n      },\r\n      \r\n      \r\n    \r\n \r\n\r\n    }\r\n  }\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/page/Order.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-container',[_c('el-header',[_c('el-select',{attrs:{\"placeholder\":\"请选择订单状态\",\"clearable\":\"\"},on:{\"change\":function (value) { \n    if(!value){ delete _vm.searchItem.order_step;}else{_vm.searchItem.order_step = value;};_vm.initMainData();}},model:{value:(_vm.searchForm.order_step),callback:function ($$v) {_vm.$set(_vm.searchForm, \"order_step\", $$v)},expression:\"searchForm.order_step\"}},_vm._l((_vm.stepOptions),function(item){return _c('el-option',{attrs:{\"label\":item.label,\"value\":item.value}})})),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择物流状态\",\"clearable\":\"\"},on:{\"change\":function (value) { \n    if(!value){ delete _vm.searchItem.transport_status;}else{_vm.searchItem.transport_status = value;};_vm.initMainData();}},model:{value:(_vm.searchForm.transport_status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"transport_status\", $$v)},expression:\"searchForm.transport_status\"}},_vm._l((_vm.transportOptions),function(item){return _c('el-option',{attrs:{\"label\":item.label,\"value\":item.value}})})),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择支付状态状态\",\"clearable\":\"\"},on:{\"change\":function (value) { \n    if(!value){ delete _vm.searchItem.pay_status;}else{_vm.searchItem.pay_status = value;};_vm.initMainData();}},model:{value:(_vm.searchForm.pay_status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"pay_status\", $$v)},expression:\"searchForm.pay_status\"}},_vm._l((_vm.payOptions),function(item){return _c('el-option',{attrs:{\"label\":item.label,\"value\":item.value}})}))],1),_vm._v(\" \"),_c('el-main',{staticStyle:{\"height\":\"700px\",\"border\":\"2px solid #eee\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"收件人姓名\"}},[_c('span',[_vm._v(_vm._s(props.row.snap_address.name))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"收件人电话\"}},[_c('span',[_vm._v(_vm._s(props.row.snap_address.phone))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"收件人地址 \"}},[_c('span',[_vm._v(_vm._s(props.row.snap_address.province)+\"\\n              \"+_vm._s(props.row.snap_address.city)+\"\\n              \"+_vm._s(props.row.snap_address.country)+\"\\n              \"+_vm._s(props.row.snap_address.detail))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否评论 \"}},[(props.row.isremark == '0')?_c('span',[_vm._v(\"\\n                未评论\\n              \")]):_vm._e(),_vm._v(\" \"),(props.row.isremark == '1')?_c('span',[_vm._v(\"\\n                已评论\\n              \")]):_vm._e()]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"下单时间\"}},[_c('span',[_vm._v(_vm._s(props.row.create_time))])]),_vm._v(\" \"),(props.row.item[0].snap_product.product)?_c('el-form-item',{attrs:{\"label\":\"产品名称\"}},[_vm._v(\"\\n              \\n                \"+_vm._s(props.row.item[0].snap_product.product.name)+\"\\n              \\n            \")]):_vm._e(),_vm._v(\" \"),(props.row.item[0].snap_product.category)?_c('el-form-item',{attrs:{\"label\":\"产品类别\"}},[_vm._v(\"\\n                \"+_vm._s(props.row.item[0].snap_product.category.name)+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(props.row.puser)?_c('el-form-item',{attrs:{\"label\":\"推荐人信息\"}},[_vm._v(\"\\n              姓名:\"),_c('span',[_vm._v(_vm._s(props.row.puser.username))]),_vm._v(\"\\n              电话:\"),_c('span',[_vm._v(_vm._s(props.row.puser.phone))]),_vm._v(\"\\n              user_id:\"),_c('span',[_vm._v(_vm._s(props.row.puser.id))])]):_vm._e(),_vm._v(\" \"),_c('div',[_c('el-form-item',{attrs:{\"label\":\"订单详情\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":props.row.item}},[_c('el-table-column',{attrs:{\"label\":\"产品型号名称\",\"prop\":\"snap_product.name\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"产品单价\",\"prop\":\"snap_product.price\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"购买数量\",\"prop\":\"count\",\"width\":\"180\"}})],1)],1)],1)],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"订单编号\",\"prop\":\"order_no\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"总价\",\"prop\":\"total_price\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"手机号\",\"prop\":\"user.phone\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"微信昵称\",\"prop\":\"user.nickname\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"prop\":\"create_time\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"支付状态\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.pay_status == '0')?_c('span',[_vm._v(\"\\n            未支付\\n          \")]):_vm._e(),_vm._v(\" \"),(scope.row.pay_status == '1')?_c('span',[_vm._v(\"\\n            已支付\\n          \")]):_vm._e(),_vm._v(\" \"),(scope.row.pay_status == '2')?_c('span',[_vm._v(\"\\n            货到付款\\n          \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"订单状态\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.order_step == '0')?_c('span',[_vm._v(\"\\n            正常下单\\n          \")]):_vm._e(),_vm._v(\" \"),(scope.row.order_step == '1')?_c('span',[_vm._v(\"\\n            申请撤单\\n          \")]):_vm._e(),_vm._v(\" \"),(scope.row.order_step == '2')?_c('span',[_vm._v(\"\\n            同意撤单\\n          \")]):_vm._e(),_vm._v(\" \"),(scope.row.order_step == '3')?_c('span',[_vm._v(\"\\n            完结\\n          \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"物流状态\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.transport_status == '0')?_c('span',[_vm._v(\"\\n            未发货\\n          \")]):_vm._e(),_vm._v(\" \"),(scope.row.transport_status == '1')?_c('span',[_vm._v(\"\\n            已发货\\n          \")]):_vm._e(),_vm._v(\" \"),(scope.row.transport_status == '2')?_c('span',[_vm._v(\"\\n            已收货\\n          \")]):_vm._e()]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.sendGoods(scope.row)}}},[_vm._v(\"发货\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.Refund(scope.row)}}},[_vm._v(\"撤单\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.completeOrder(scope.row)}}},[_vm._v(\"完结\")])]}}])})],1)],1),_vm._v(\" \"),_c('el-footer',[_c('el-pagination',{attrs:{\"current-page\":_vm.paginate.currentPage,\"page-sizes\":[10, 50, 70, 100],\"page-size\":_vm.paginate.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.paginate.count},on:{\"size-change\":function (val) {_vm.paginate.pagesize = val;_vm.initMainData();},\"current-change\":function (val) {_vm.paginate.currentPage = val;_vm.initMainData();}}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-92966aca\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/page/Order.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-92966aca\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Order.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Order.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Order.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-92966aca\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Order.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/Order.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}