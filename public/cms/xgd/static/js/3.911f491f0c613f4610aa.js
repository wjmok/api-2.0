webpackJsonp([3],{S7LG:function(e,t){},UmiO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),o=a.n(r),n=a("exGp"),s=a.n(n),i=a("SQnW"),l=a("dw4X"),c=a("1h8J"),p=a("HBZn"),u={data:function(){return{tableData:[],tableDataCoupon:[],tableDataCustomerCard:[],dialogFormVisible:!1,dialogCouponVisible:!1,dialogCustomerCardVisible:!1,dialogScoreVisible:!1,userId:"",formLabelWidth:"120px",paginate:{count:0,currentPage:1,pagesize:10,is_page:!0},paginateCoupon:{count:0,currentPage:1,pagesize:10,is_page:!0},paginateCustomerCard:{count:0,currentPage:1,pagesize:10,is_page:!0},searchItem:{},searchForm:{phone:"",username:"",id:""},imglimit:2,Form:{},standardForm:{trade_type:"",trade_info:"",score:"",type:""},sForm:{},passForm:{password:""},userKey:this.$store.getters.getUserInfo.username,token:this.$store.getters.getUserInfo.token,thirdapp_id:this.$store.getters.getUserInfo.thirdapp_id}},created:function(){this.initMainData()},components:{editor:i.a,imgup:l.a},methods:{initMainData:function(e){var t=this;return s()(o.a.mark(function e(){var a,r,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t).tableData=[],(r=a.paginate).token=a.token,a.searchItem&&(r.searchItem=Object(p.a)(a.searchItem)),e.prev=6,e.next=9,Object(c.E)(r);case 9:n=e.sent,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),Object(p.f)("网络故障","error");case 16:n&&(a.paginate.count=n.data.total,a.tableData=n.data.data);case 19:case"end":return e.stop()}},e,t,[[6,12]])}))()},initCouponData:function(){var e=this;return s()(o.a.mark(function t(){var a,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).tableDataCoupon=[],(r=a.paginateCoupon).token=a.token,r.id=a.userId,t.prev=5,t.next=8,Object(c.f)(r);case 8:n=t.sent,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(5),console.log(t.t0),Object(p.f)("网络故障","error");case 15:n&&(a.paginateCoupon.count=n.data.total,a.tableDataCoupon=n.data.data);case 18:case"end":return t.stop()}},t,e,[[5,11]])}))()},initCustomerCardData:function(){var e=this;return s()(o.a.mark(function t(){var a,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).tableDataCoupon=[],(r=a.paginateCustomerCard).token=a.token,r.id=a.userId,t.prev=5,t.next=8,Object(c.e)(r);case 8:n=t.sent,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(5),console.log(t.t0),Object(p.f)("网络故障","error");case 15:n&&(a.paginateCustomerCard.count=n.data.total,a.tableDataCustomerCard=n.data.data);case 18:case"end":return t.stop()}},t,e,[[5,11]])}))()},findCoupon:function(e){this.userId=e.id,this.initCouponData(),this.dialogCouponVisible=!0},findCard:function(e){this.userId=e.id,this.initCustomerCardData(),this.dialogCustomerCardVisible=!0},handleAdd:function(){this.Form=Object(p.a)(this.standardForm),this.sForm={},this.sForm.type="add",this.sForm.token=this.token,this.dialogFormVisible=!0},handleEdit:function(e){this.Form=Object(p.a)(e),this.sForm={},this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="edit",this.dialogFormVisible=!0},handleScore:function(e){this.Form=Object(p.a)(this.standardForm),this.sForm={},this.sForm.user_id=e.id,this.sForm.token=this.token,this.sForm.type="score",console.log(this.sForm),this.dialogScoreVisible=!0},handleDel:function(e){var t=this;return s()(o.a.mark(function a(){var r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:(r=t).sForm={},r.sForm.id=e.id,r.sForm.token=r.token,r.sForm.type="del",r.onSubmit();case 6:case"end":return a.stop()}},a,t)}))()},handleEditPassword:function(e){this.sForm={},this.Form={},this.Form.password="",this.sForm.id=e.id,this.sForm.token=this.token,this.sForm.type="upPassword",this.dialogCouponVisible=!0},onSubmit:function(){var e=this;return s()(o.a.mark(function t(){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("edit"!=(a=e).sForm.type){t.next=17;break}return delete a.sForm.type,t.prev=3,t.next=6,Object(c.D)(a.sForm);case 6:r=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0),Object(p.f)("网络故障","error");case 13:a.sForm.type="edit",t.next=96;break;case 17:if("add"!=a.sForm.type){t.next=33;break}return delete a.sForm.type,t.prev=19,t.next=22,Object(c.Q)(a.sForm);case 22:r=t.sent,t.next=29;break;case 25:t.prev=25,t.t1=t.catch(19),console.log(t.t1),Object(p.f)("网络故障","error");case 29:a.sForm.type="add",t.next=96;break;case 33:if("upPassword"!=a.sForm.type){t.next=49;break}return delete a.sForm.type,t.prev=35,t.next=38,uptPass(a.sForm);case 38:r=t.sent,t.next=45;break;case 41:t.prev=41,t.t2=t.catch(35),console.log(t.t2),Object(p.f)("网络故障","error");case 45:a.sForm.type="upPassword",t.next=96;break;case 49:if("del"!=a.sForm.type){t.next=65;break}return delete a.sForm.type,t.prev=51,t.next=54,Object(c.S)(a.sForm);case 54:r=t.sent,t.next=61;break;case 57:t.prev=57,t.t3=t.catch(51),console.log(t.t3),Object(p.f)("网络故障","error");case 61:a.sForm.type="del",t.next=96;break;case 65:if("score"!=a.sForm.type){t.next=82;break}return delete a.sForm.type,t.prev=67,t.next=70,Object(c.Y)(a.sForm);case 70:r=t.sent,console.log(r),t.next=78;break;case 74:t.prev=74,t.t4=t.catch(67),console.log(t.t4),Object(p.f)("网络故障","error");case 78:a.sForm.type="score",t.next=96;break;case 82:if("balance"!=a.sForm.type){t.next=96;break}return delete a.sForm.type,t.prev=84,t.next=87,Object(c.R)(a.sForm);case 87:r=t.sent,t.next=94;break;case 90:t.prev=90,t.t5=t.catch(84),console.log(t.t5),Object(p.f)("网络故障","error");case 94:a.sForm.type="balance";case 96:r&&"success"==Object(p.g)(r)&&("upPassword"==a.sForm.type?a.dialogCouponVisible=!1:a.dialogFormVisible=!1,a.dialogScoreVisible=!1,a.initMainData());case 99:case"end":return t.stop()}},t,e,[[3,9],[19,25],[35,41],[51,57],[67,74],[84,90]])}))()},imgchange:function(e){return Object(p.e)(this,e,"sForm","img")}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入ID"},on:{blur:function(t){t.target._value?e.searchItem.id=t.target._value:delete e.searchItem.id,e.initMainData(t.target._value)}},model:{value:e.searchForm.id,callback:function(t){e.$set(e.searchForm,"id",t)},expression:"searchForm.id"}}),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入电话号码"},on:{blur:function(t){t.target._value?e.searchItem.phone=t.target._value:delete e.searchItem.phone,e.initMainData(t.target._value)}},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}}),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入真实姓名"},on:{blur:function(t){t.target._value?e.searchItem.username=t.target._value:delete e.searchItem.username,e.initMainData()}},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),e._v(" "),a("el-main",{staticStyle:{height:"700px",border:"2px solid #eee"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"用户ID",prop:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户昵称",prop:"nickname"}}),e._v(" "),a("el-table-column",{attrs:{label:"真实姓名",prop:"username"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",prop:"phone"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户头像",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.headimgurl?a("div",[a("img",{staticStyle:{width:"60px","border-radius":"50%"},attrs:{src:t.row.headimgurl[0].url}})]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"学号/工号",prop:"passage1"}}),e._v(" "),a("el-table-column",{attrs:{label:"学院/部门",prop:"passage2"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"create_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("\n          编辑信息\n          ")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleScore(t.row)}}},[e._v("\n            修改信誉积分\n          ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改用户信息",visible:e.dialogFormVisible,id:"dialog"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"Form",attrs:{model:e.Form}},[a("el-form-item",{attrs:{label:"真实姓名","label-width":e.formLabelWidth,prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},on:{input:function(t){e.sForm.username=arguments[0]}},model:{value:e.Form.username,callback:function(t){e.$set(e.Form,"username",t)},expression:"Form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号","label-width":e.formLabelWidth,prop:"phone"}},[a("el-input",{attrs:{"auto-complete":"off"},on:{change:function(t){e.sForm.phone=e.Form.phone}},model:{value:e.Form.phone,callback:function(t){e.$set(e.Form,"phone",t)},expression:"Form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学号/工号","label-width":e.formLabelWidth,prop:"passage1"}},[a("el-input",{attrs:{"auto-complete":"off"},on:{change:function(t){e.sForm.passage1=e.Form.passage1}},model:{value:e.Form.passage1,callback:function(t){e.$set(e.Form,"passage1",t)},expression:"Form.passage1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学院/部门","label-width":e.formLabelWidth,prop:"passage2"}},[a("el-input",{attrs:{"auto-complete":"off"},on:{change:function(t){e.sForm.passage2=e.Form.passage2}},model:{value:e.Form.passage2,callback:function(t){e.$set(e.Form,"passage2",t)},expression:"Form.passage2"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"优惠券列表",visible:e.dialogCouponVisible},on:{"update:visible":function(t){e.dialogCouponVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataCoupon}},[a("el-table-column",{attrs:{prop:"",label:"优惠券名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"优惠券内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receive_time",label:"优惠券领取时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"有效期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"use_time",label:"使用时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"优惠券状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.coupon_status?a("span",[e._v("未使用")]):e._e(),e._v(" "),1==t.row.coupon_status?a("span",[e._v("已使用")]):e._e(),e._v(" "),-1==t.row.coupon_status?a("span",[e._v("已失效")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.paginateCoupon.currentPage,"page-sizes":[10,50,70,100],"page-size":e.paginateCoupon.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginateCoupon.count},on:{"size-change":function(t){e.paginateCoupon.pagesize=t,e.initMainData()},"current-change":function(t){e.paginateCoupon.currentPage=t,e.initMainData()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"会员卡列表",visible:e.dialogCustomerCardVisible},on:{"update:visible":function(t){e.dialogCustomerCardVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataCustomerCard}},[a("el-table-column",{attrs:{prop:"card.name",label:"会员卡名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"card.cardLevel",label:"会员卡等级"}}),e._v(" "),a("el-table-column",{attrs:{prop:"card.description",label:"会员卡内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"card.price",label:"会员卡价格"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pay_time",label:"会员卡购买时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"有效期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"积分"}}),e._v(" "),a("el-table-column",{attrs:{label:"会员卡类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.cardType?a("span",[e._v("分值卡")]):e._e(),e._v(" "),2==t.row.cardType?a("span",[e._v("时间卡")]):e._e(),e._v(" "),3==t.row.cardType?a("span",[e._v("单次卡")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.paginateCoupon.currentPage,"page-sizes":[10,50,70,100],"page-size":e.paginateCoupon.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginateCoupon.count},on:{"size-change":function(t){e.paginateCoupon.pagesize=t,e.initMainData()},"current-change":function(t){e.paginateCoupon.currentPage=t,e.initMainData()}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑积分或佣金",visible:e.dialogScoreVisible,id:"dialog"},on:{"update:visible":function(t){e.dialogScoreVisible=t}}},[a("el-form",{ref:"Form",attrs:{model:e.Form}},[a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-select",{on:{change:function(t){e.sForm.trade_type=e.Form.trade_type}},model:{value:e.Form.trade_type,callback:function(t){e.$set(e.Form,"trade_type",t)},expression:"Form.trade_type"}},[a("el-option",{attrs:{value:"1",label:"增加"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"减少"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"变动值","label-width":e.formLabelWidth,prop:"score"}},[a("el-input",{attrs:{"auto-complete":"off"},on:{change:function(t){e.sForm.score=e.Form.score}},model:{value:e.Form.score,callback:function(t){e.$set(e.Form,"score",t)},expression:"Form.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变动原因","label-width":e.formLabelWidth,prop:"trade_info"}},[a("el-input",{attrs:{"auto-complete":"off"},on:{change:function(t){e.sForm.trade_info=e.Form.trade_info}},model:{value:e.Form.trade_info,callback:function(t){e.$set(e.Form,"trade_info",t)},expression:"Form.trade_info"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-footer",[a("el-pagination",{attrs:{"current-page":e.paginate.currentPage,"page-sizes":[10,50,70,100],"page-size":e.paginate.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginate.count},on:{"size-change":function(t){e.paginate.pagesize=t,e.initMainData()},"current-change":function(t){e.paginate.currentPage=t,e.initMainData()}}})],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,m,!1,function(e){a("S7LG")},null,null);t.default=d.exports}});
//# sourceMappingURL=3.911f491f0c613f4610aa.js.map